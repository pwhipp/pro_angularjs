{% extends 'core/base.html' %}
{% block ng-app %}ng-app="exampleApp"{% endblock ng-app %}
{% block title %}Chapter 10 Directives{% endblock title %}
{% block head_extras %}
    <script>
        angular.module("exampleApp", [])
                .controller("defaultCtrl", function ($scope) {
                    $scope.todos = [
                        { action: "Get groceries", complete: false },
                        { action: "Call plumber", complete: false },
                        { action: "Buy running shoes", complete: true },
                        { action: "Buy flowers", complete: false },
                        { action: "Call family", complete: false }];

                    $scope.viewFile = function(){
                        if ($scope.showList){
                            return '/static/core/includes/list.html';
                        } else {
                            return '/static/core/includes/table.html';
                        }
                    };

                    $scope.reportChange = function () {
                        console.log("Displayed content: " + $scope.viewFile());
                    }
                });
    </script>
{% endblock head_extras %}
{% block body %}
    {% verbatim %}
    <div id="todoPanel" class="panel" ng-controller="defaultCtrl">
        <h3 class="panel-header">To Do List</h3>

        <div class="well">
            <div class="checkbox">
                <label>
                    <input type="checkbox" ng-model="showList">
                    Use the list view
                </label>
            </div>
        </div>

        <ng-include src="viewFile()" onload="reportChange()"></ng-include>

    </div>
    {% endverbatim %}
{%  endblock body %}